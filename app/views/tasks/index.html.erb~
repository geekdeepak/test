<% if @project %>

  <h2>
    <%=h @project.name %>
    <small> |
      <%= link_to 'Edit', edit_project_path(@project) %> | 
      <%= delete_item_link("projects", @project) %>
    </small>
  </h2>

  <p><%=h @project.description %></p>

  <div class="task_filter"> 
    <%= link_to_unless_current 'All', project_tasks_path(@project) %> |
    <%= link_to_unless_current 'Today', today_project_tasks_path(@project) %> |
    <%= link_to_unless_current 'Tomorrow', tomorrow_project_tasks_path(@project) %> |
    <%= link_to_unless_current 'Completed', completed_project_tasks_path(@project) %> |
    <%= link_to_unless_current 'Overdue', overdue_project_tasks_path(@project) %>
  </div>
  
<% elsif @life %>

  <p><%=h @life.description %></p>
  
  <div class="task_filter"> 
    <%= link_to_unless_current 'All', life_tasks_path(@life) %> |
    <%= link_to_unless_current 'Today', today_life_tasks_path(@life) %> |
    <%= link_to_unless_current 'Tomorrow', tomorrow_life_tasks_path(@life) %> |
    <%= link_to_unless_current 'Completed', completed_life_tasks_path(@life) %> |
    <%= link_to_unless_current 'Overdue', overdue_life_tasks_path(@life) %>
  </div>
  
<% else %>

  <div class="task_filter"> 
    <%= link_to_unless_current 'All', tasks_path %> |
    <%= link_to_unless_current 'Today', today_tasks_path %> |
    <%= link_to_unless_current 'Tomorrow', tomorrow_tasks_path %> |
    <%= link_to_unless_current 'Completed', completed_tasks_path %> |
    <%= link_to_unless_current 'Overdue', overdue_tasks_path %>
  </div>
  
<% end %>

<div class="task_head">
  <span class="name">Action</span>
  <span class="when">When</span>
  <span class="duration">Duration</span>
</div>

<%= render :partial => 'task', :collection => @tasks %>

<p>
  <%= link_to( 'Add Project', new_life_project_path(@life) )+ " |" if @life %>
  <%= link_to( 'Add Task', new_project_task_path(@project) ) + " |" if @project %>
  <%= link_to( 'Add Task', new_life_task_path(@life) ) + " |" if @life && !@life.projects.empty? && !@project %>
  <%= link_to 'Add to Calendar', formatted_tasks_path(:ics) %><br />
  <small>Supported by iCal, Outlook, and most major calendar apps.</small>
  
</p>
